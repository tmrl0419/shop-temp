<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mind Map</title>
    <meta name="description" content="A mind map editor, showing how subtrees can be moved, copied, deleted, and laid out." />
    <!-- Copyright 1998-2018 by Northwoods Software Corporation. -->
    <meta charset="UTF-8">
    <script src="go.js"></script>
    <script src="goSamples.js"></script>  <!-- this is only for the GoJS Samples framework -->
    <script id="code">
        function init() {
            // 이거필요
            var $ = go.GraphObject.make;

            // 이거필요
            myDiagram =
                $(go.Diagram, "myDiagramDiv",
                    {
                        padding: 20,
                        // when the user drags a node, also move/copy/delete the whole subtree starting with that node
                        "commandHandler.copiesTree": true,
                        "commandHandler.deletesTree": true,
                        "draggingTool.dragsTree": true,
                        initialContentAlignment: go.Spot.Center,  // center the whole graph
                        "undoManager.isEnabled": true
                    });
            // 이거필요
            // when the document is modified, add a "*" to the title and enable the "Save" button
            myDiagram.addDiagramListener("Modified", function(e) {
                var button = document.getElementById("SaveButton");
                if (button) button.disabled = !myDiagram.isModified;
                var idx = document.title.indexOf("*");
                if (myDiagram.isModified) {
                    if (idx < 0) document.title += "*";
                } else {
                    if (idx >= 0) document.title = document.title.substr(0, idx);
                }
            });
            // 이거필요
            // a node consists of some text with a line shape underneath
            myDiagram.nodeTemplate =
                $(go.Node, "Vertical",
                    { selectionObjectName: "TEXT" },
                    $(go.TextBlock,
                        {
                            name: "TEXT",
                            minSize: new go.Size(30, 15),
                            editable: true
                        },
                        // remember not only the text string but the scale and the font in the node data
                        new go.Binding("text", "text").makeTwoWay(),
                        new go.Binding("scale", "scale").makeTwoWay(),
                        new go.Binding("font", "font").makeTwoWay()),
                    $(go.Shape, "LineH",
                        {
                            stretch: go.GraphObject.Horizontal,
                            strokeWidth: 3, height: 3,
                            // this line shape is the port -- what links connect with
                            portId: "", fromSpot: go.Spot.LeftRightSides, toSpot: go.Spot.LeftRightSides
                        },
                        new go.Binding("stroke", "brush"),
                        // make sure links come in from the proper direction and go out appropriately
                        new go.Binding("fromSpot", "dir", function(d) { return spotConverter(d, true); }),
                        new go.Binding("toSpot", "dir", function(d) { return spotConverter(d, false); })),
                    // remember the locations of each node in the node data
                    new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify),
                    // make sure text "grows" in the desired direction
                    new go.Binding("locationSpot", "dir", function(d) { return spotConverter(d, false); })
                );
            // 이거필요
            // a link is just a Bezier-curved line of the same color as the node to which it is connected
            myDiagram.linkTemplate =
                $(go.Link,
                    {
                        curve: go.Link.Bezier,
                        fromShortLength: -2,
                        toShortLength: -2,
                        selectable: false
                    },
                    $(go.Shape,
                        { strokeWidth: 3 },
                        new go.Binding("stroke", "toNode", function(n) {
                            if (n.data.brush) return n.data.brush;
                            return "black";
                        }).ofObject())
                );

            // read in the predefined graph using the JSON format data held in the "mySavedModel" textarea
            load();
        }
        // 이거필요
        function spotConverter(dir, from) {
            if (dir === "left") {
                return (from ? go.Spot.Left : go.Spot.Right);
            } else {
                return (from ? go.Spot.Right : go.Spot.Left);
            }
        }
        mySavedModel = { "class": "go.TreeModel",
            "nodeDataArray": [
                {"key":0, "text":"Online ShopingMall", "loc":"0 0"},
                {"key":1, "parent":0, "text":"Node.js", "brush":"skyblue", "dir":"right", "loc":"150 -22" },
                {"key":2, "parent":0, "text":"Pug", "brush":"darkseagreen", "dir":"right", "loc":"150 43"},
                {"key":3, "parent":0, "text":"CSS", "brush":"palevioletred", "dir":"left", "loc":"-20 -31.75"},
                {"key":4, "parent":0, "text":"HTTP", "brush":"coral", "dir":"left", "loc":"-20 52.75"},
            ]
        }

        // 이거필요
        function load() {
            myDiagram.model = go.Model.fromJson(mySavedModel);
        }
    </script>
</head>
<body onload="init()">
<div id="sample">
    <div id="myDiagramDiv" style="border: solid 1px black; width:100%; height:300px;"></div>
</div>
</body>
</html>
